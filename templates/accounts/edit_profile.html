{% extends "base.html" %}

{% block content %}
<div>
    <div class='form-group'>
        <form method='post' enctype='multipart/form-data' id='update_form'>
        {% csrf_token %}
        {{ form.errors }}
        {{ user_form.as_p }}
        {{ profile_form.as_p }}       
        <button class='btn btn-secondary'>Update Profile</button>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
$(document).ready(function() {
  $('#update_form').submit(function(event) {
    // Get the value of the email field
    var email = $('#id_email').val();

    // Check if the email is a valid email address
    if (!isValidEmail(email)) {
      // If the email is not valid, prevent the form from being submitted and display an error message
      event.preventDefault();
      alert('Please enter a valid email address');
    }
  });
});

function isValidEmail(email) {
  // Regular expression to check if the email is in a valid format
  var regex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return regex.test(email);
}

{% endblock scripts %}